{"version":3,"sources":["webpack://mesto/./src/components/Сard.js","webpack://mesto/./src/components/FormValidator.js","webpack://mesto/./src/components/Section.js","webpack://mesto/./src/components/UserInfo.js","webpack://mesto/./src/components/Popup.js","webpack://mesto/./src/components/PopupWithForm.js","webpack://mesto/./src/components/PopupWithSubmit.js","webpack://mesto/./src/components/PopupWithImage.js","webpack://mesto/./src/components/Api.js","webpack://mesto/./src/utils/constants.js","webpack://mesto/./src/pages/index.js"],"names":["Card","cardSelector","config","user","data","handleCardClick","handleLikeClick","handleDeleteIconClick","this","_user","_handleCardClick","_handleLikeClick","_handleDeleteIconClick","_cardName","name","_cardLink","link","_cardId","cardID","_cardOwner","owner","_cardLikes","likes","_cardInfo","_cardElement","cardElement","_cardImage","cardImage","_cardTitle","cardTitle","_cardLike","cardLike","_cardTrash","cardTrash","_cardLikeCounter","cardLikeCounter","_cardSelector","document","querySelector","content","cloneNode","_element","_getTemplate","_cardPicture","deleteButton","likeButton","_likeCounter","src","alt","textContent","length","_likes","Array","from","map","item","_id","includes","classList","add","remove","addEventListener","_handleCardZoomListener","closest","FormValidator","formElement","inputElement","errorMessage","errorElement","_formElement","id","_inputErrorClass","_errorClass","validity","valid","_hideInputError","_showInputError","validationMessage","_toggleButtonState","_inputList","forEach","_checkInputValidity","evt","preventDefault","_fieldsetList","fieldSet","_setEventListeners","some","_hasInvalidInput","_buttonElement","_inactiveButtonClass","inputArrayElement","_formSelector","formSelector","_inputSelector","inputSelector","_submitButtonSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","_fieldsSelector","fieldsSelector","querySelectorAll","Section","containerSelector","renderer","_renderer","_containerSelector","items","element","prepend","UserInfo","profileName","profileStatus","profileAvatar","_profileName","_profileStatus","_profileAvatar","status","about","avatar","Popup","popupSelector","_popupSelector","_handleEscClose","bind","_popup","key","close","removeEventListener","target","PopupWithForm","handleFormSubmit","_handleFormSubmit","_form","reset","_getInputValues","value","PopupWithSubmit","_buttonSubmit","func","PopupWithImage","imageZoomPopapElement","titleZoomPopupElement","_imagePopup","_titlePopup","Api","options","_baseUrl","baseUrl","_headers","headers","fetch","method","then","res","ok","json","Promise","reject","body","JSON","stringify","avatarUrl","root","configValidation","configGenerationCards","elements","formProfileEdit","formAddCard","formUpdateAvatar","profileButtonEdit","popupEdit","inputArray","buttonSubmitEdit","profileButtonAdd","buttonSubmitAdd","popupImage","popupTitleZoomImage","avatarIcon","buttonSubmitUpdate","formProfileEditValidator","enableValidation","formAddCardValidator","formUpdateAvatarValidator","popupCardAdd","inputsValue","api","createUserInfo","card","array","push","cardList","renderItems","catch","error","console","log","popupProfileEdit","setUserInfo","userInfo","popupAvatarUpdate","inputValue","updateAvatar","popupZoomImage","popupCardDeleteConfirm","cardData","addItem","open","cardInfo","likesCounter","likesOnCard","deleteLike","splice","indexOf","setLike","deleteCard","removeCardLayout","getUser","generateCard","createCard","authorization","getUserInfo","getInitialCards","reverse","setEventListeners","resetFormErrors","inputName","inputStatus"],"mappings":"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","file":"main.js","sourcesContent":["// Создаем класс карточки и применяем экспорт по-умолчанию\r\nexport default class Card {\r\n  // в конструктор принимаем объект с содержимым карточек,\r\n  // объект с селекторами шаблона, селектор template и функция открытия попапа с картинкой\r\n\tconstructor({data, handleCardClick, handleLikeClick, handleDeleteIconClick},\r\n    cardSelector, config, user) {\r\n    this._user = user;\r\n    // callback-и\r\n    this._handleCardClick = handleCardClick;\r\n    this._handleLikeClick = handleLikeClick;\r\n    this._handleDeleteIconClick = handleDeleteIconClick;\r\n    // карточка\r\n\t\tthis._cardName = data.name;\r\n\t\tthis._cardLink = data.link;\r\n    this._cardId = data.cardID;\r\n    this._cardOwner = data.owner;\r\n    this._cardLikes = data.likes;\r\n    this._cardInfo = data;\r\n    // шаблон\r\n    this._cardElement = config.cardElement;\r\n    this._cardImage = config.cardImage;\r\n    this._cardTitle = config.cardTitle;\r\n    this._cardLike = config.cardLike;\r\n    this._cardTrash = config.cardTrash;\r\n    this._cardLikeCounter = config.cardLikeCounter;\r\n    // селектор шаблона\r\n\t\tthis._cardSelector = cardSelector;\r\n\t}\r\n\r\n  // приватный метод, помещаем в переменную клон шаблона и возвращаем ее\r\n\t_getTemplate() {\r\n    const cardElement = document.querySelector(this._cardSelector)\r\n    .content.querySelector(this._cardElement).cloneNode(true);\r\n    return cardElement;\r\n  }\r\n  \r\n  // публичный метод, создает карточку и навешивает обработчики\r\n  generateCard() {\r\n    // поместили в переменную содержимое приватного метода\r\n    this._element = this._getTemplate();\r\n    this._cardPicture = this._element.querySelector(this._cardImage);\r\n    const deleteButton = this._element.querySelector(this._cardTrash);\r\n    const likeButton = this._element.querySelector(this._cardLike);\r\n    this._likeCounter = this._element.querySelector(this._cardLikeCounter);\r\n    //  наполняем карточку содержимым из объекта\r\n    this._cardPicture.src = this._cardLink;\r\n    this._cardPicture.alt = this._cardName;\r\n    this._element.querySelector(this._cardTitle).textContent = this._cardName;\r\n    this._likeCounter.textContent = this._cardLikes.length;\r\n\r\n    \r\n    this._likes = Array.from(this._cardLikes).map(item => {\r\n      return item._id;\r\n    });\r\n\r\n    if(this._likes.includes(this._user._id)) {\r\n      likeButton.classList.add('element__like_active');\r\n    } else {\r\n      likeButton.classList.remove('element__like_active');\r\n    }\r\n\r\n    // навешиваем обработчики\r\n    // слушатель лайка\r\n    likeButton.addEventListener('click', () => {\r\n      this._handleLikeClick(this._cardInfo,\r\n                            this._likes,\r\n                            this._user,\r\n                            likeButton,\r\n                            this._likeCounter);\r\n    });\r\n\r\n\r\n    // слушатель удаления\r\n    if(this._cardOwner._id === this._user._id) {\r\n      deleteButton.addEventListener('click', () => {\r\n        this._handleDeleteIconClick(this._cardId);\r\n      });\r\n    } else {\r\n      deleteButton.remove();\r\n    }\r\n\r\n    // слушатель нажатия на изображение\r\n    this._handleCardZoomListener();\r\n    \r\n    // возвращаем готовую карточку\r\n    return this._element;\r\n  }\r\n\r\n\r\n  _setEventListenerts() {\r\n\r\n  }\r\n\r\n  // метод удаления карточки\r\n  removeCardLayout() {\r\n    this._element.closest(this._cardElement).remove();\r\n  }\r\n\r\n  // приватный метод, слушатель нажатия на изображение\r\n  _handleCardZoomListener() {\r\n    this._cardPicture.addEventListener('click', () => {\r\n      this._handleCardClick(this._cardName, this._cardLink);\r\n    });\r\n  }\r\n}","// Создаем класс карточки и применяем экспорт по-умолчанию\r\nexport default class FormValidator {\r\n  // в конструктор принимаем объект с селекторами формы и текущая форма\r\n\tconstructor(data, formElement) {\r\n    // селекторы формы\r\n\t\tthis._formSelector = data.formSelector;\r\n\t\tthis._inputSelector = data.inputSelector;\r\n\t  this._submitButtonSelector = data.submitButtonSelector;\r\n    this._inactiveButtonClass = data.inactiveButtonClass;\r\n    this._inputErrorClass = data.inputErrorClass;\r\n    this._errorClass = data.errorClass;\r\n    this._fieldsSelector = data.fieldsSelector;\r\n    // текущая форма\r\n    this._formElement = formElement;\r\n\r\n    this._buttonElement = this._formElement.querySelector(this._submitButtonSelector);\r\n    this._inputList = Array.from(this._formElement.querySelectorAll(this._inputSelector));\r\n    this._fieldsetList = Array.from(this._formElement.querySelectorAll(this._fieldsSelector));\r\n\t}\r\n\r\n  // функция отобржения ошибки (поле ввода, сообщение ошибки)\r\n  _showInputError = (inputElement, errorMessage) => {\r\n    // находим у данной формы селектор сообщения ошибки, принадлежащий полю ввода\r\n    // и заносим данные в константу\r\n    const errorElement = this._formElement.querySelector(`.${inputElement.id}-error`);\r\n    // добавляем полю ввода селектор ошибки (красная граница)\r\n    inputElement.classList.add(this._inputErrorClass);\r\n    // заносим в тест ошибки входное сообщение ошибки\r\n    errorElement.textContent = errorMessage;\r\n    // делаем текст ошибки видимым\r\n    errorElement.classList.add(this._errorClass);\r\n  };\r\n\r\n  // функция скрытия ошибки (поле ввода)\r\n  _hideInputError = (inputElement) => {\r\n    // находим у данной формы селектор сообщения ошибки, принадлежащий полю ввода\r\n    // и заносим данные в константу\r\n    const errorElement = this._formElement.querySelector(`.${inputElement.id}-error`);\r\n    // удаляем селектор ошибки поля ввода (красная граница)\r\n    inputElement.classList.remove(this._inputErrorClass);\r\n    // скрываем текст ошибки\r\n    errorElement.classList.remove(this._errorClass);\r\n    // очищаем текст ошибки\r\n    errorElement.textContent = '';\r\n  };\r\n\r\n  // функция проверки поля на валидность (поле ввода)\r\n  _checkInputValidity = (inputElement) => {\r\n    // если поле не проходит валидацию - покажем ошибки\r\n    if (!inputElement.validity.valid) {\r\n      this._showInputError(inputElement, inputElement.validationMessage);\r\n      // иначе - скроем ее\r\n    } else {\r\n      this._hideInputError(inputElement);\r\n    }\r\n  };\r\n\r\n  // функция добавления слушателей к полям (форма)\r\n  _setEventListeners = () => {\r\n    // вызываем функцию переключения состояния кнопки sabmit\r\n    this._toggleButtonState();\r\n    // проходимся по массиву и к каждому полю ввода применяем функцию\r\n    this._inputList.forEach((inputElement) => {\r\n      // добавляем слушатель события на ввод в поле \r\n      inputElement.addEventListener('input', () => {\r\n        // вызываем функцию проверки валидности поля\r\n        this._checkInputValidity(inputElement);\r\n        // и функцию переключения состояния кнопки sabmit\r\n        this._toggleButtonState();\r\n      });\r\n    });\r\n  };\r\n\r\n  // функция, ответственная за включение валидации форм\r\n  enableValidation = () => {\r\n    this._formElement.addEventListener('submit', (evt) => {\r\n      // запрещаем браузеру обновлять страницу\r\n      evt.preventDefault();\r\n    });\r\n    // к каждому полю применяем функцию\r\n    this._fieldsetList.forEach((fieldSet) => {\r\n      // вызываем функцию добавления слушателей\r\n      this._setEventListeners(fieldSet);\r\n    });\r\n  };\r\n\r\n  // функция проверки поля на валидность\r\n  _hasInvalidInput = () => {\r\n    // возвращаем true, если хотя бы один не прошел проверку\r\n    return this._inputList.some((inputElement) => {\r\n      // проверяем условие, есть ли хотя бы один элемент, не прошедший валидацию\r\n      return !inputElement.validity.valid;\r\n    });\r\n  };\r\n\r\n  // функция переключения состояния кпонки sabmit\r\n  _toggleButtonState = () => {\r\n    // если хотя бы одно поле ввода не прошло проверку на валидность\r\n    if (this._hasInvalidInput()) {\r\n      // делаем кнопку неактивной\r\n      this._buttonElement.classList.add(this._inactiveButtonClass);\r\n      // иначе - делаем активной\r\n    } else {\r\n      this._buttonElement.classList.remove(this._inactiveButtonClass);\r\n    }\r\n  };\r\n\r\n  // функция обнуления ошибок\r\n  resetFormErrors = () => {\r\n    // блокируем кнопку по умолчанию\r\n    this._toggleButtonState();\r\n    // проходим по каждому полю ввода\r\n    this._inputList.forEach((inputArrayElement) => {\r\n      // находим соответствующий span ошибки\r\n      const errorElement = this._formElement.querySelector(`.${inputArrayElement.id}-error`);\r\n      // очищаем ошибки\r\n      inputArrayElement.classList.remove(this._inputErrorClass);\r\n      errorElement.classList.remove(this._errorClass);\r\n      errorElement.textContent = '';\r\n    });\r\n  };\r\n}","// Создаем класс отрисовки элементов на странице\r\nexport default class Section {\r\n  // в конструктор принимаем объект с содержимым карточек,\r\n  // объект с селекторами шаблона и селектор template\r\n\tconstructor({renderer}, containerSelector) {\r\n    // массив данных, добавляемых на страницу\r\n    // функция создания и отрисовки данных (один элемент)\r\n\t\tthis._renderer = renderer;\r\n    // селектор контейнера\r\n\t\tthis._containerSelector = containerSelector;\r\n\t}\r\n\r\n  // метод для отрисовки всех элементов\r\n  renderItems(items) {\r\n    items.forEach(item => this._renderer(item));\r\n  }\r\n\r\n  // метод (принимает DOM-элемент и добавляет в контейнер)\r\n  addItem(element) {\r\n    this._containerSelector.prepend(element);\r\n  }\r\n}","// Создаем класс управления отображением информации о пользователе\r\nexport default class UserInfo {\r\n  // в конструктор принимаем объект с селекторами двух элементов:\r\n  // элемента имени пользователя и элемента информации о себе\r\n\tconstructor({profileName, profileStatus, profileAvatar}) {\r\n\t\tthis._profileName = document.querySelector(profileName);\r\n\t\tthis._profileStatus = document.querySelector(profileStatus);\r\n    this._profileAvatar = document.querySelector(profileAvatar);\r\n\t}\r\n\r\n  // метод возвращает объект с данными пользователя\r\n  getUserInfo() {\r\n    return { \r\n              name: this._profileName.textContent,\r\n              status: this._profileStatus.textContent\r\n            };\r\n  }\r\n\r\n  // метод принимает новые данные пользователя и добавляет их на страницу\r\n  setUserInfo(user) {\r\n    this._profileName.textContent = user.name;\r\n    this._profileStatus.textContent = user.about;\r\n    this._profileAvatar.src = user.avatar;\r\n    this._user = user;\r\n  }\r\n\r\n  getUser() {\r\n    return this._user;\r\n  }\r\n}","// Создаем класс попапа\r\nexport default class Popup {\r\n  // в конструктор принимаем селектор попапа страницы\r\n\tconstructor(popupSelector) {\r\n    // селектор попапа\r\n\t\tthis._popupSelector = document.querySelector(popupSelector);\r\n    this._handleEscClose = this._handleEscClose.bind(this);\r\n    this._popup = document.querySelector(popupSelector);\r\n\t}\r\n\r\n  // метод зыкрытия попапа на Esc\r\n  _handleEscClose(evt) {\r\n    if(evt.key === \"Escape\") {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  // метод для открытия попапа\r\n  open() {\r\n    this._popupSelector.classList.add('popup_opened');\r\n    document.addEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  // метод для закрытия попапа\r\n  close() {\r\n    this._popupSelector.classList.remove('popup_opened');\r\n    document.removeEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  // слушатели\r\n  setEventListeners() {\r\n    // закрытие popup на крестик\r\n    this._popupSelector.querySelector('.popup__button-close').addEventListener('click', () => {\r\n      this.close();\r\n    });\r\n    // закрытие popup на overlay\r\n    this._popup.addEventListener('click', (evt) => {\r\n      if (evt.target === this._popup) {\r\n        this.close();\r\n      }\r\n    });\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popupSelector, handleFormSubmit) {\r\n    super(popupSelector);\r\n    // колбэк сабмита формы\r\n    this._handleFormSubmit = handleFormSubmit;\r\n    this._popup = document.querySelector(popupSelector);\r\n    this._form = this._popup.querySelector('.form');\r\n  }\r\n\r\n  // метод для закрытия попапа\r\n  close() {\r\n    super.close(); // вызываем родительский метод\r\n    this._form.reset();\r\n  }\r\n\r\n  // слушатель клика\r\n  setEventListeners() {\r\n    super.setEventListeners(); // вызываем родительский метод\r\n    // обработчик сабмита\r\n    this._form.addEventListener('submit', () => {\r\n      this._handleFormSubmit(this._getInputValues());\r\n    });\r\n  }\r\n\r\n  // собираем данные всех полей формы\r\n  _getInputValues() {\r\n    const inputArray = Array.from(this._form.querySelectorAll('.form__input'));\r\n\r\n    const inputsValue = inputArray.map((item) => {\r\n      return item.value;\r\n    });\r\n\r\n    return inputsValue;\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithSubmit extends Popup {\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    // колбэк сабмита формы\r\n    this._popup = document.querySelector(popupSelector);\r\n    this._buttonSubmit = this._popup.querySelector('.form__button_section_delete-confirm');\r\n  }\r\n\r\n  // слушатель клика\r\n  setEventListeners() {\r\n    super.setEventListeners(); // вызываем родительский метод\r\n    // обработчик сабмита\r\n    this._buttonSubmit.addEventListener('click', () => {\r\n      this._handleFormSubmit();\r\n    });\r\n  }\r\n\r\n  method(func) {\r\n    this._handleFormSubmit = func;\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popupSelector, imageZoomPopapElement, titleZoomPopupElement) {\r\n    super(popupSelector);\r\n    this._imagePopup = imageZoomPopapElement;\r\n    this._titlePopup = titleZoomPopupElement;\r\n  }\r\n\r\n    // метод для открытия попапа\r\n  open(name, link) {\r\n    super.open(); // вызываем родительский метод\r\n    // дополним новой функциональностью:\r\n    this._imagePopup.src = link;\r\n    this._imagePopup.alt = link;\r\n    this._titlePopup.textContent = name;\r\n  }\r\n}","export default class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  // получаем информацию о карточках\r\n  getInitialCards() {\r\n    return fetch(this._baseUrl+'/cards', {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      // если ошибка, отклоняем промис\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // получаем информацию о пользователе\r\n  getUserInfo() {\r\n    return fetch(this._baseUrl+'/users/me', {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      // если ошибка, отклоняем промис\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // отправляем информацию о пользователе\r\n  setUserInfo(name, status) {\r\n    return fetch(this._baseUrl+'/users/me', {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: status\r\n      })\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      // если ошибка, отклоняем промис\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // создаем карточку\r\n  createUserInfo(name, link) {\r\n    return fetch(this._baseUrl+'/cards', {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link\r\n      })\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      // если ошибка, отклоняем промис\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n  \r\n  // удаляем карточку\r\n  deleteCard(cardID) {\r\n    return fetch(this._baseUrl+'/cards/'+cardID, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      // если ошибка, отклоняем промис\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // ставим лайк на карточку\r\n  setLike(cardID) {\r\n    return fetch(this._baseUrl+'/cards/likes/'+cardID, {\r\n      method: 'PUT',\r\n      headers: this._headers\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      // если ошибка, отклоняем промис\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // ставим лайк на карточку\r\n  deleteLike(cardID) {\r\n    return fetch(this._baseUrl+'/cards/likes/'+cardID, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      // если ошибка, отклоняем промис\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // обновляем аватар\r\n  updateAvatar(avatarUrl) {\r\n    return fetch(this._baseUrl+'/users/me/avatar', {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: avatarUrl\r\n      })\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      // если ошибка, отклоняем промис\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n}\r\n","const root = document.querySelector('.root');\r\n\r\n// объект с селекторами для валидации форм\r\nexport const configValidation = {\r\n  formSelector: '.form',\r\n  inputSelector: '.form__input',\r\n  submitButtonSelector: '.form__button',\r\n  inactiveButtonClass: 'form__button_disabled',\r\n  inputErrorClass: 'form__input_type_error',\r\n  errorClass: 'form__error_visible',\r\n  fieldsSelector: '.form__fields'\r\n};\r\n\r\n// объект с селекторами для шаблона карточек\r\nexport const configGenerationCards = {\r\n  cardElement: '.element',\r\n  cardImage: '.element__image',\r\n  cardTitle: '.element__title',\r\n  cardLike: '.element__like',\r\n  cardTrash: '.element__trash-button',\r\n  cardLikeCounter: '.element__like-counter'\r\n};\r\n\r\n// контейнер для карточек\r\nexport const elements = root.querySelector('.elements');\r\n\r\n// формы страницы\r\nexport const formProfileEdit = root.querySelector('.form_section_profile-edit');\r\nexport const formAddCard = root.querySelector('.form_section_card-add');\r\nexport const formUpdateAvatar = root.querySelector('.form_section_update-avatar');\r\n\r\n// --------------------- попап редактирования профиля ---------------------\r\n// селектор кнопки редактирования профиля\r\nexport const profileButtonEdit = root.querySelector('.profile__button-edit');\r\n// попап\r\nconst popupEdit = root.querySelector('.popup_section_profile-edit');\r\n// массив инпутов\r\nexport const inputArray = Array.from(popupEdit.querySelectorAll('.form__input'));\r\nexport const buttonSubmitEdit = root.querySelector('.form__button_section_profile-edit');\r\n// ------------------------------------------------------------------------\r\n\r\n// ---------------------- попап добавления карточки -----------------------\r\n// селектор кнопки добавления карточки\r\nexport const profileButtonAdd = root.querySelector('.profile__button-add');\r\nexport const buttonSubmitAdd = root.querySelector('.form__button_section_card-add');\r\n// ------------------------------------------------------------------------\r\n\r\n// -------------------- попап увеличения изображения ----------------------\r\n// селекторы формы для увеличения изображения\r\nexport const popupImage = root.querySelector('.popup__image');\r\nexport const popupTitleZoomImage = root.querySelector('.popup__title-zoom-image');\r\n// ------------------------------------------------------------------------\r\n\r\n// ---------------------- попап обновления аватара ------------------------\r\nexport const avatarIcon = root.querySelector('.profile__cover');\r\nexport const buttonSubmitUpdate = root.querySelector('.form__button_section_update-avatar');\r\n// ------------------------------------------------------------------------","// Импорты\r\nimport './index.css'; // импорт главного файла стилей \r\nimport Card from '../components/Сard.js';\r\nimport FormValidator from '../components/FormValidator.js';\r\nimport Section from '../components/Section.js';\r\nimport UserInfo from '../components/UserInfo.js';\r\nimport PopupWithForm from '../components/PopupWithForm.js';\r\nimport PopupWithSubmit from '../components/PopupWithSubmit.js';\r\nimport PopupWithImage from '../components/PopupWithImage.js';\r\nimport Api from '../components/Api.js';\r\nimport {\r\n        elements,\r\n        formProfileEdit,\r\n        formAddCard,\r\n        configGenerationCards,\r\n        configValidation,\r\n        profileButtonAdd,\r\n        profileButtonEdit,\r\n        inputArray,\r\n        popupImage,\r\n        popupTitleZoomImage,\r\n        buttonSubmitAdd,\r\n        formUpdateAvatar,\r\n        avatarIcon,\r\n        buttonSubmitUpdate,\r\n        buttonSubmitEdit\r\n} from '../utils/constants.js';\r\n\r\n// ------------------- создание экземпляра класса карточки -------------------\r\nconst createCard = (cardData) => {\r\n  const card = new Card({\r\n    data: {\r\n      name: cardData.name,\r\n      link: cardData.link,\r\n      cardID: cardData._id,\r\n      owner: cardData.owner,\r\n      likes: cardData.likes\r\n    },\r\n    handleCardClick: (name, link) => {\r\n      // ...что должно произойти при клике на картинку\r\n      popupZoomImage.open(name, link);\r\n    },\r\n    handleLikeClick: (cardInfo, likes, user, likeButton, likesCounter) => {\r\n      // ...что должно произойти при клике на лайк\r\n      let likesOnCard = likes;\r\n      if(likesOnCard.includes(user._id)) {\r\n        api.deleteLike(cardInfo.cardID)\r\n        .then(res => {\r\n          likeButton.classList.remove('element__like_active');\r\n          likesOnCard.splice(likesOnCard.indexOf(user._id),1);\r\n          likesCounter.textContent = res.likes.length;\r\n        })\r\n      } else {\r\n        api.setLike(cardInfo.cardID)\r\n        .then(res => {\r\n          likeButton.classList.add('element__like_active');\r\n          likesOnCard.push(user._id);\r\n          likesCounter.textContent = res.likes.length;\r\n        })\r\n      }\r\n    },\r\n    handleDeleteIconClick: (cardID) => {\r\n      // ...что должно произойти при клике на удаление\r\n      popupCardDeleteConfirm.open();\r\n      popupCardDeleteConfirm.method(() => {\r\n        api.deleteCard(cardID)\r\n        .then(res => {\r\n          console.log(res);\r\n          card.removeCardLayout();\r\n          popupCardDeleteConfirm.close();\r\n        })\r\n      });\r\n    }\r\n    },\r\n    '#card-template',\r\n    configGenerationCards,\r\n    userInfo.getUser()\r\n  );\r\n  const cardElement = card.generateCard();\r\n  return cardElement;\r\n};\r\n// ---------------------------------------------------------------------------\r\n\r\n// --------------- применяем валидацию ко всем формам страницы ---------------\r\nconst formProfileEditValidator = new FormValidator(configValidation, formProfileEdit);\r\nformProfileEditValidator.enableValidation();\r\n\r\nconst formAddCardValidator = new FormValidator(configValidation, formAddCard);\r\nformAddCardValidator.enableValidation();\r\n\r\nconst formUpdateAvatarValidator = new FormValidator(configValidation, formUpdateAvatar);\r\nformUpdateAvatarValidator.enableValidation();\r\n// ---------------------------------------------------------------------------\r\n\r\n// ----------- создание экземпляра попапа для добавления карточки ------------\r\nconst popupCardAdd = new PopupWithForm('.popup_section_card-add', (inputsValue) => {\r\n  buttonSubmitAdd.textContent = 'Добавление...';\r\n  const user = {};\r\n  [user.name, user.link] = inputsValue;\r\n// вызываем метод для создания карточки на сервере и отрисовки ее на странице\r\napi.createUserInfo(user.name, user.link)\r\n  .then(card => {\r\n    const array = [];\r\n    array.push(card);\r\n    cardList.renderItems(array);\r\n    popupCardAdd.close();\r\n    buttonSubmitAdd.textContent = 'Добавить';\r\n  }).catch(error => {\r\n    console.log(error);\r\n  });\r\n});\r\n// ---------------------------------------------------------------------------\r\n\r\n// ---------- создание экземпляра попапа для редактирования профиля ----------\r\nconst popupProfileEdit = new PopupWithForm('.popup_section_profile-edit', (inputsValue) => {\r\n  buttonSubmitEdit.textContent = 'Сохранение...';\r\n  const [name, status] = inputsValue;\r\n  api.setUserInfo(name, status)\r\n    .then(res => {\r\n      userInfo.setUserInfo(res);\r\n      popupProfileEdit.close();\r\n      buttonSubmitEdit.textContent = 'Сохранить';\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n});\r\n// ---------------------------------------------------------------------------\r\n\r\n// ------------ создание экземпляра попапа для обновления аватара ------------\r\nconst popupAvatarUpdate = new PopupWithForm('.popup_section_update-avatar', (inputValue) => {\r\n  buttonSubmitUpdate.textContent = 'Сохранение...';\r\n  const [avatarUrl] = inputValue;\r\n  api.updateAvatar(avatarUrl)\r\n    .then(res => {\r\n      userInfo.setUserInfo(res);\r\n      popupAvatarUpdate.close();\r\n      buttonSubmitUpdate.textContent = 'Сохранить';\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n});\r\n// ---------------------------------------------------------------------------\r\n\r\n// ------------ создание экземпляра попапа для открытия карточки -------------\r\nconst popupZoomImage = new PopupWithImage('.popup_section_image-zoom', popupImage, popupTitleZoomImage);\r\n// ---------------------------------------------------------------------------\r\n\r\n// --------- создание экземпляра попапа для подтверждения удаления ---------\r\nconst popupCardDeleteConfirm = new PopupWithSubmit('.popup_section_delete-confirm');\r\n// ---------------------------------------------------------------------------  \r\n\r\n// ------------- создание экземпляра класса информации профиля ---------------\r\nconst userInfo = new UserInfo({\r\n  profileName: '.profile__name',\r\n  profileStatus: '.profile__status',\r\n  profileAvatar: '.profile__avatar'\r\n});\r\n// ---------------------------------------------------------------------------\r\n\r\n// ------------------------ создание экземпляра секции -----------------------\r\nconst cardList = new Section({\r\n  renderer: (cardData) => {\r\n    cardList.addItem(createCard(cardData));\r\n  }\r\n}, elements);\r\n// ---------------------------------------------------------------------------\r\n\r\n// создаем класс для связи с сервером\r\nconst api = new Api({\r\n  // базовый адрес обращения\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\r\n  headers: {\r\n    // уникальный токен пользователя\r\n    authorization: 'a3ab0050-d01a-4f5a-9bb4-4a039b0aa641',\r\n    // MIME Type - формат отправляемых данных (формат JSON)\r\n    'Content-Type': 'application/json'\r\n  }\r\n}); \r\n\r\n// получаем данные о пользователе \r\napi.getUserInfo()\r\n  .then(user => {\r\n    userInfo.setUserInfo(user);\r\n  }).catch(error => {\r\n    console.log(error);\r\n  })\r\n\r\n// вызываем метод для взятия данных карточек с сервера и отрисовки их на странице\r\napi.getInitialCards()\r\n  .then(card => {\r\n    cardList.renderItems(card.reverse());\r\n  }).catch(error => {\r\n    console.log(error);\r\n  })\r\n\r\n// Слушатели \r\n// навесили слушатели на попапы\r\npopupZoomImage.setEventListeners();\r\npopupAvatarUpdate.setEventListeners();\r\npopupCardAdd.setEventListeners();\r\npopupProfileEdit.setEventListeners();\r\npopupCardDeleteConfirm.setEventListeners();\r\n\r\n// слушатель нажатия на кнопку добавления карточки\r\nprofileButtonAdd.addEventListener('click', () => {\r\n  // сбросили ошибки и заблокировали кнопку\r\n  formAddCardValidator.resetFormErrors();\r\n  popupCardAdd.open();\r\n});\r\n\r\n// слушатель нажатия на иконку аватара\r\navatarIcon.addEventListener('click', () => {\r\n  // сбросили ошибки и заблокировали кнопку\r\n  formUpdateAvatarValidator.resetFormErrors();\r\n  popupAvatarUpdate.open();\r\n});\r\n\r\n// слушатель нажатия на кнопку редактирования профиля\r\nprofileButtonEdit.addEventListener('click', () => {\r\n  // сбросили ошибки и заблокировали кнопку\r\n  formProfileEditValidator.resetFormErrors();\r\n  popupProfileEdit.open();\r\n  const [inputName, inputStatus] = inputArray;\r\n  const {name, status} = userInfo.getUserInfo();\r\n  [inputName.value, inputStatus.value] = [name, status];\r\n});\r\n\r\n// слушатели для отмены стандартной отправки форм\r\nformProfileEdit.addEventListener('submit', function (evt) {\r\n  evt.preventDefault();\r\n});\r\n\r\nformAddCard.addEventListener('submit', function (evt) {\r\n  evt.preventDefault();\r\n});"],"sourceRoot":""}