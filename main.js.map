{"version":3,"sources":["webpack://mesto/./src/components/Сard.js","webpack://mesto/./src/components/FormValidator.js","webpack://mesto/./src/components/Section.js","webpack://mesto/./src/components/UserInfo.js","webpack://mesto/./src/components/Popup.js","webpack://mesto/./src/components/PopupWithForm.js","webpack://mesto/./src/components/PopupWithSubmit.js","webpack://mesto/./src/components/PopupWithImage.js","webpack://mesto/./src/components/Api.js","webpack://mesto/./src/utils/constants.js","webpack://mesto/./src/pages/index.js"],"names":["Card","cardSelector","config","user","data","handleCardClick","handleLikeClick","handleDeleteIconClick","this","_user","_handleCardClick","_handleLikeClick","_handleDeleteIconClick","_cardName","name","_cardLink","link","_cardId","cardID","_cardOwner","owner","_cardLikes","likes","_cardInfo","_cardElement","cardElement","_cardImage","cardImage","_cardTitle","cardTitle","_cardLike","cardLike","_cardTrash","cardTrash","_cardLikeCounter","cardLikeCounter","_cardSelector","document","querySelector","content","cloneNode","_element","_getTemplate","_cardPicture","deleteButton","likeButton","_likeCounter","src","alt","textContent","length","_likes","Array","from","map","item","_id","includes","classList","add","remove","addEventListener","_handleCardZoomListener","closest","FormValidator","formElement","inputElement","errorMessage","errorElement","_formElement","id","_inputErrorClass","_errorClass","validity","valid","_hideInputError","_showInputError","validationMessage","_toggleButtonState","_inputList","forEach","_checkInputValidity","evt","preventDefault","_fieldsetList","fieldSet","_setEventListeners","some","_hasInvalidInput","_buttonElement","_inactiveButtonClass","disabled","inputArrayElement","_formSelector","formSelector","_inputSelector","inputSelector","_submitButtonSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","_fieldsSelector","fieldsSelector","querySelectorAll","Section","containerSelector","renderer","_renderer","_containerSelector","items","element","prepend","UserInfo","profileName","profileStatus","profileAvatar","_profileName","_profileStatus","_profileAvatar","status","about","avatar","Popup","popupSelector","_popupSelector","_handleEscClose","bind","_popup","key","close","removeEventListener","target","PopupWithForm","handleFormSubmit","_handleFormSubmit","_form","reset","_getInputValues","value","PopupWithSubmit","_buttonSubmit","func","PopupWithImage","imageZoomPopapElement","titleZoomPopupElement","_imagePopup","_titlePopup","Api","options","_baseUrl","baseUrl","_headers","headers","fetch","method","then","res","ok","json","Promise","reject","body","JSON","stringify","avatarUrl","root","configValidation","configGenerationCards","elements","formProfileEdit","formAddCard","formUpdateAvatar","profileButtonEdit","popupEdit","inputArray","buttonSubmitEdit","profileButtonAdd","buttonSubmitAdd","popupImage","popupTitleZoomImage","avatarIcon","buttonSubmitUpdate","formProfileEditValidator","enableValidation","formAddCardValidator","formUpdateAvatarValidator","userInfo","cardList","cardData","addItem","card","popupZoomImage","open","cardInfo","likesCounter","likesOnCard","api","deleteLike","splice","indexOf","catch","error","console","log","setLike","push","popupCardDeleteConfirm","createHandleSubmit","deleteCard","removeCardLayout","getUser","generateCard","createCard","authorization","getUserInfo","setUserInfo","getInitialCards","renderItems","reverse","popupCardAdd","inputsValue","createUserInfo","array","popupProfileEdit","popupAvatarUpdate","inputValue","updateAvatar","setEventListeners","resetFormErrors","inputName","inputStatus"],"mappings":"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","file":"main.js","sourcesContent":["// Создаем класс карточки и применяем экспорт по-умолчанию\nexport default class Card {\n  // в конструктор принимаем объект с содержимым карточек,\n  // объект с селекторами шаблона, селектор template и функция открытия попапа с картинкой\n\tconstructor(\n      {\n        data,\n        handleCardClick,\n        handleLikeClick,\n        handleDeleteIconClick\n      },\n      cardSelector,\n      config,\n      user) {\n    // данные пользователя\n    this._user = user;\n    // callback-и\n    this._handleCardClick = handleCardClick;\n    this._handleLikeClick = handleLikeClick;\n    this._handleDeleteIconClick = handleDeleteIconClick;\n    // карточка\n\t\tthis._cardName = data.name;\n\t\tthis._cardLink = data.link;\n    this._cardId = data.cardID;\n    this._cardOwner = data.owner;\n    this._cardLikes = data.likes;\n    this._cardInfo = data;\n    // шаблон\n    this._cardElement = config.cardElement;\n    this._cardImage = config.cardImage;\n    this._cardTitle = config.cardTitle;\n    this._cardLike = config.cardLike;\n    this._cardTrash = config.cardTrash;\n    this._cardLikeCounter = config.cardLikeCounter;\n    // селектор шаблона\n\t\tthis._cardSelector = cardSelector;\n\t}\n\n  // приватный метод, помещаем в переменную клон шаблона и возвращаем ее\n\t_getTemplate() {\n    const cardElement = document.querySelector(this._cardSelector)\n    .content.querySelector(this._cardElement).cloneNode(true);\n    return cardElement;\n  }\n\n  // публичный метод, создает карточку и навешивает обработчики\n  generateCard() {\n    this._element = this._getTemplate();\n    this._cardPicture = this._element.querySelector(this._cardImage);\n    const deleteButton = this._element.querySelector(this._cardTrash);\n    const likeButton = this._element.querySelector(this._cardLike);\n    this._likeCounter = this._element.querySelector(this._cardLikeCounter);\n    //  наполняем карточку содержимым из объекта\n    this._cardPicture.src = this._cardLink;\n    this._cardPicture.alt = this._cardName;\n    this._element.querySelector(this._cardTitle).textContent = this._cardName;\n    this._likeCounter.textContent = this._cardLikes.length;\n\n    // собираем массив id-пользователей, поставивших лайк карточке\n    this._likes = Array.from(this._cardLikes).map(item => {\n      return item._id;\n    });\n\n    // делаем проверку на собственный лайк у карточки при первоначальной загрузке страницы\n    if(this._likes.includes(this._user._id)) {\n      likeButton.classList.add('element__like_active');\n    } else {\n      likeButton.classList.remove('element__like_active');\n    }\n\n    // навешиваем обработчики\n    // слушатель лайка\n    likeButton.addEventListener('click', () => {\n      this._handleLikeClick(this._cardInfo,\n                            this._likes,\n                            this._user,\n                            likeButton,\n                            this._likeCounter);\n    });\n\n    // слушатель удаления\n    if(this._cardOwner._id === this._user._id) {\n      deleteButton.addEventListener('click', () => {\n        this._handleDeleteIconClick(this._cardId);\n      });\n    } else {\n      deleteButton.remove();\n    }\n\n    // слушатель нажатия на изображение\n    this._handleCardZoomListener();\n\n    // возвращаем готовую карточку\n    return this._element;\n  }\n\n  // метод удаления карточки из разметки\n  removeCardLayout() {\n    this._element.closest(this._cardElement).remove();\n  }\n\n  // приватный метод, слушатель нажатия на изображение\n  _handleCardZoomListener() {\n    this._cardPicture.addEventListener('click', () => {\n      this._handleCardClick(this._cardName, this._cardLink);\n    });\n  }\n}\n","// Создаем класс карточки и применяем экспорт по-умолчанию\nexport default class FormValidator {\n  // в конструктор принимаем объект с селекторами формы и текущая форма\n\tconstructor(data, formElement) {\n    // селекторы формы\n\t\tthis._formSelector = data.formSelector;\n\t\tthis._inputSelector = data.inputSelector;\n\t  this._submitButtonSelector = data.submitButtonSelector;\n    this._inactiveButtonClass = data.inactiveButtonClass;\n    this._inputErrorClass = data.inputErrorClass;\n    this._errorClass = data.errorClass;\n    this._fieldsSelector = data.fieldsSelector;\n    // текущая форма\n    this._formElement = formElement;\n\n    this._buttonElement = this._formElement.querySelector(this._submitButtonSelector);\n    this._inputList = Array.from(this._formElement.querySelectorAll(this._inputSelector));\n    this._fieldsetList = Array.from(this._formElement.querySelectorAll(this._fieldsSelector));\n\t}\n\n  // функция отобржения ошибки (поле ввода, сообщение ошибки)\n  _showInputError = (inputElement, errorMessage) => {\n    // находим у данной формы селектор сообщения ошибки, принадлежащий полю ввода\n    // и заносим данные в константу\n    const errorElement = this._formElement.querySelector(`.${inputElement.id}-error`);\n    // добавляем полю ввода селектор ошибки (красная граница)\n    inputElement.classList.add(this._inputErrorClass);\n    // заносим в тест ошибки входное сообщение ошибки\n    errorElement.textContent = errorMessage;\n    // делаем текст ошибки видимым\n    errorElement.classList.add(this._errorClass);\n  };\n\n  // функция скрытия ошибки (поле ввода)\n  _hideInputError = (inputElement) => {\n    // находим у данной формы селектор сообщения ошибки, принадлежащий полю ввода\n    // и заносим данные в константу\n    const errorElement = this._formElement.querySelector(`.${inputElement.id}-error`);\n    // удаляем селектор ошибки поля ввода (красная граница)\n    inputElement.classList.remove(this._inputErrorClass);\n    // скрываем текст ошибки\n    errorElement.classList.remove(this._errorClass);\n    // очищаем текст ошибки\n    errorElement.textContent = '';\n  };\n\n  // функция проверки поля на валидность (поле ввода)\n  _checkInputValidity = (inputElement) => {\n    // если поле не проходит валидацию - покажем ошибки\n    if (!inputElement.validity.valid) {\n      this._showInputError(inputElement, inputElement.validationMessage);\n      // иначе - скроем ее\n    } else {\n      this._hideInputError(inputElement);\n    }\n  };\n\n  // функция добавления слушателей к полям (форма)\n  _setEventListeners = () => {\n    // вызываем функцию переключения состояния кнопки sabmit\n    this._toggleButtonState();\n    // проходимся по массиву и к каждому полю ввода применяем функцию\n    this._inputList.forEach((inputElement) => {\n      // добавляем слушатель события на ввод в поле\n      inputElement.addEventListener('input', () => {\n        // вызываем функцию проверки валидности поля\n        this._checkInputValidity(inputElement);\n        // и функцию переключения состояния кнопки sabmit\n        this._toggleButtonState();\n      });\n    });\n  };\n\n  // функция, ответственная за включение валидации форм\n  enableValidation = () => {\n    this._formElement.addEventListener('submit', (evt) => {\n      // запрещаем браузеру обновлять страницу\n      evt.preventDefault();\n    });\n    // к каждому полю применяем функцию\n    this._fieldsetList.forEach((fieldSet) => {\n      // вызываем функцию добавления слушателей\n      this._setEventListeners(fieldSet);\n    });\n  };\n\n  // функция проверки поля на валидность\n  _hasInvalidInput = () => {\n    // возвращаем true, если хотя бы один не прошел проверку\n    return this._inputList.some((inputElement) => {\n      // проверяем условие, есть ли хотя бы один элемент, не прошедший валидацию\n      return !inputElement.validity.valid;\n    });\n  };\n\n  // функция переключения состояния кпонки sabmit\n  _toggleButtonState = () => {\n    // если хотя бы одно поле ввода не прошло проверку на валидность\n    if (this._hasInvalidInput()) {\n      // делаем кнопку неактивной\n      this._buttonElement.classList.add(this._inactiveButtonClass);\n      this._buttonElement.disabled = true;\n      // иначе - делаем активной\n    } else {\n      this._buttonElement.classList.remove(this._inactiveButtonClass);\n      this._buttonElement.disabled = false;\n    }\n  };\n\n  // функция обнуления ошибок\n  resetFormErrors = () => {\n    // блокируем кнопку по умолчанию\n    this._toggleButtonState();\n    // проходим по каждому полю ввода\n    this._inputList.forEach((inputArrayElement) => {\n      // находим соответствующий span ошибки\n      const errorElement = this._formElement.querySelector(`.${inputArrayElement.id}-error`);\n      // очищаем ошибки\n      inputArrayElement.classList.remove(this._inputErrorClass);\n      errorElement.classList.remove(this._errorClass);\n      errorElement.textContent = '';\n    });\n  };\n}\n","// Создаем класс отрисовки элементов на странице\r\nexport default class Section {\r\n  // в конструктор принимаем объект с содержимым карточек,\r\n  // объект с селекторами шаблона и селектор template\r\n\tconstructor({renderer}, containerSelector) {\r\n    // массив данных, добавляемых на страницу\r\n    // функция создания и отрисовки данных (один элемент)\r\n\t\tthis._renderer = renderer;\r\n    // селектор контейнера\r\n\t\tthis._containerSelector = containerSelector;\r\n\t}\r\n\r\n  // метод для отрисовки всех элементов\r\n  renderItems(items) {\r\n    items.forEach(item => this._renderer(item));\r\n  }\r\n\r\n  // метод (принимает DOM-элемент и добавляет в контейнер)\r\n  addItem(element) {\r\n    this._containerSelector.prepend(element);\r\n  }\r\n}","// Создаем класс управления отображением информации о пользователе\nexport default class UserInfo {\n  // в конструктор принимаем объект с селекторами двух элементов:\n  // элемента имени пользователя и элемента информации о себе\n\tconstructor({profileName, profileStatus, profileAvatar}) {\n\t\tthis._profileName = document.querySelector(profileName);\n\t\tthis._profileStatus = document.querySelector(profileStatus);\n    this._profileAvatar = document.querySelector(profileAvatar);\n\t}\n\n  // метод возвращает объект с данными пользователя\n  getUserInfo() {\n    return {\n              name: this._profileName.textContent,\n              status: this._profileStatus.textContent\n            };\n  }\n\n  // метод принимает новые данные пользователя и добавляет их на страницу\n  setUserInfo(user) {\n    this._profileName.textContent = user.name;\n    this._profileStatus.textContent = user.about;\n    this._profileAvatar.src = user.avatar;\n    this._user = user;\n  }\n\n  // возвращаем данные пользователя\n  getUser() {\n    return this._user;\n  }\n}\n","// Создаем класс попапа\r\nexport default class Popup {\r\n  // в конструктор принимаем селектор попапа страницы\r\n\tconstructor(popupSelector) {\r\n    // селектор попапа\r\n\t\tthis._popupSelector = document.querySelector(popupSelector);\r\n    this._handleEscClose = this._handleEscClose.bind(this);\r\n    this._popup = document.querySelector(popupSelector);\r\n\t}\r\n\r\n  // метод зыкрытия попапа на Esc\r\n  _handleEscClose(evt) {\r\n    if(evt.key === \"Escape\") {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  // метод для открытия попапа\r\n  open() {\r\n    this._popupSelector.classList.add('popup_opened');\r\n    document.addEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  // метод для закрытия попапа\r\n  close() {\r\n    this._popupSelector.classList.remove('popup_opened');\r\n    document.removeEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  // слушатели\r\n  setEventListeners() {\r\n    // закрытие popup на крестик\r\n    this._popupSelector.querySelector('.popup__button-close').addEventListener('click', () => {\r\n      this.close();\r\n    });\r\n    // закрытие popup на overlay\r\n    this._popup.addEventListener('click', (evt) => {\r\n      if (evt.target === this._popup) {\r\n        this.close();\r\n      }\r\n    });\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popupSelector, handleFormSubmit) {\r\n    super(popupSelector);\r\n    // колбэк сабмита формы\r\n    this._handleFormSubmit = handleFormSubmit;\r\n    this._popup = document.querySelector(popupSelector);\r\n    this._form = this._popup.querySelector('.form');\r\n  }\r\n\r\n  // метод для закрытия попапа\r\n  close() {\r\n    super.close(); // вызываем родительский метод\r\n    this._form.reset();\r\n  }\r\n\r\n  // слушатель клика\r\n  setEventListeners() {\r\n    super.setEventListeners(); // вызываем родительский метод\r\n    // обработчик сабмита\r\n    this._form.addEventListener('submit', () => {\r\n      this._handleFormSubmit(this._getInputValues());\r\n    });\r\n  }\r\n\r\n  // собираем данные всех полей формы\r\n  _getInputValues() {\r\n    const inputArray = Array.from(this._form.querySelectorAll('.form__input'));\r\n\r\n    const inputsValue = inputArray.map((item) => {\r\n      return item.value;\r\n    });\r\n\r\n    return inputsValue;\r\n  }\r\n}","import Popup from './Popup.js';\n\nexport default class PopupWithSubmit extends Popup {\n  constructor(popupSelector) {\n    super(popupSelector);\n    // колбэк сабмита формы\n    this._popup = document.querySelector(popupSelector);\n    this._buttonSubmit = this._popup.querySelector('.form__button_section_delete-confirm');\n  }\n\n  // слушатель клика\n  setEventListeners() {\n    super.setEventListeners(); // вызываем родительский метод\n    // обработчик сабмита\n    this._buttonSubmit.addEventListener('click', () => {\n      this._handleFormSubmit();\n    });\n  }\n\n  // создаем колбэк для сабмита из принимаемых данных\n  createHandleSubmit(func) {\n    this._handleFormSubmit = func;\n  }\n}\n","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popupSelector, imageZoomPopapElement, titleZoomPopupElement) {\r\n    super(popupSelector);\r\n    this._imagePopup = imageZoomPopapElement;\r\n    this._titlePopup = titleZoomPopupElement;\r\n  }\r\n\r\n    // метод для открытия попапа\r\n  open(name, link) {\r\n    super.open(); // вызываем родительский метод\r\n    // дополним новой функциональностью:\r\n    this._imagePopup.src = link;\r\n    this._imagePopup.alt = link;\r\n    this._titlePopup.textContent = name;\r\n  }\r\n}","export default class Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  // получаем информацию о карточках\n  getInitialCards() {\n    return fetch(this._baseUrl+'/cards', {\n      method: 'GET',\n      headers: this._headers\n    })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      // если ошибка, отклоняем промис\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  // получаем информацию о пользователе\n  getUserInfo() {\n    return fetch(this._baseUrl+'/users/me', {\n      method: 'GET',\n      headers: this._headers\n    })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      // если ошибка, отклоняем промис\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  // отправляем информацию о пользователе\n  setUserInfo(name, status) {\n    return fetch(this._baseUrl+'/users/me', {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: status\n      })\n    })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      // если ошибка, отклоняем промис\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  // создаем карточку\n  createUserInfo(name, link) {\n    return fetch(this._baseUrl+'/cards', {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      // если ошибка, отклоняем промис\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  // удаляем карточку\n  deleteCard(cardID) {\n    return fetch(this._baseUrl+'/cards/'+cardID, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      // если ошибка, отклоняем промис\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  // ставим лайк на карточку\n  setLike(cardID) {\n    return fetch(this._baseUrl+'/cards/likes/'+cardID, {\n      method: 'PUT',\n      headers: this._headers\n    })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      // если ошибка, отклоняем промис\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  // ставим лайк на карточку\n  deleteLike(cardID) {\n    return fetch(this._baseUrl+'/cards/likes/'+cardID, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      // если ошибка, отклоняем промис\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  // обновляем аватар\n  updateAvatar(avatarUrl) {\n    return fetch(this._baseUrl+'/users/me/avatar', {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: avatarUrl\n      })\n    })\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      // если ошибка, отклоняем промис\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n}\n","const root = document.querySelector('.root');\r\n\r\n// объект с селекторами для валидации форм\r\nexport const configValidation = {\r\n  formSelector: '.form',\r\n  inputSelector: '.form__input',\r\n  submitButtonSelector: '.form__button',\r\n  inactiveButtonClass: 'form__button_disabled',\r\n  inputErrorClass: 'form__input_type_error',\r\n  errorClass: 'form__error_visible',\r\n  fieldsSelector: '.form__fields'\r\n};\r\n\r\n// объект с селекторами для шаблона карточек\r\nexport const configGenerationCards = {\r\n  cardElement: '.element',\r\n  cardImage: '.element__image',\r\n  cardTitle: '.element__title',\r\n  cardLike: '.element__like',\r\n  cardTrash: '.element__trash-button',\r\n  cardLikeCounter: '.element__like-counter'\r\n};\r\n\r\n// контейнер для карточек\r\nexport const elements = root.querySelector('.elements');\r\n\r\n// формы страницы\r\nexport const formProfileEdit = root.querySelector('.form_section_profile-edit');\r\nexport const formAddCard = root.querySelector('.form_section_card-add');\r\nexport const formUpdateAvatar = root.querySelector('.form_section_update-avatar');\r\n\r\n// --------------------- попап редактирования профиля ---------------------\r\n// селектор кнопки редактирования профиля\r\nexport const profileButtonEdit = root.querySelector('.profile__button-edit');\r\n// попап\r\nconst popupEdit = root.querySelector('.popup_section_profile-edit');\r\n// массив инпутов\r\nexport const inputArray = Array.from(popupEdit.querySelectorAll('.form__input'));\r\nexport const buttonSubmitEdit = root.querySelector('.form__button_section_profile-edit');\r\n// ------------------------------------------------------------------------\r\n\r\n// ---------------------- попап добавления карточки -----------------------\r\n// селектор кнопки добавления карточки\r\nexport const profileButtonAdd = root.querySelector('.profile__button-add');\r\nexport const buttonSubmitAdd = root.querySelector('.form__button_section_card-add');\r\n// ------------------------------------------------------------------------\r\n\r\n// -------------------- попап увеличения изображения ----------------------\r\n// селекторы формы для увеличения изображения\r\nexport const popupImage = root.querySelector('.popup__image');\r\nexport const popupTitleZoomImage = root.querySelector('.popup__title-zoom-image');\r\n// ------------------------------------------------------------------------\r\n\r\n// ---------------------- попап обновления аватара ------------------------\r\nexport const avatarIcon = root.querySelector('.profile__cover');\r\nexport const buttonSubmitUpdate = root.querySelector('.form__button_section_update-avatar');\r\n// ------------------------------------------------------------------------","// Импорты\nimport './index.css'; // импорт главного файла стилей\nimport Card from '../components/Сard.js';\nimport FormValidator from '../components/FormValidator.js';\nimport Section from '../components/Section.js';\nimport UserInfo from '../components/UserInfo.js';\nimport PopupWithForm from '../components/PopupWithForm.js';\nimport PopupWithSubmit from '../components/PopupWithSubmit.js';\nimport PopupWithImage from '../components/PopupWithImage.js';\nimport Api from '../components/Api.js';\nimport {\n        elements,\n        formProfileEdit,\n        formAddCard,\n        configGenerationCards,\n        configValidation,\n        profileButtonAdd,\n        profileButtonEdit,\n        inputArray,\n        popupImage,\n        popupTitleZoomImage,\n        buttonSubmitAdd,\n        formUpdateAvatar,\n        avatarIcon,\n        buttonSubmitUpdate,\n        buttonSubmitEdit\n} from '../utils/constants.js';\n\n// --------------- применяем валидацию ко всем формам страницы ---------------\nconst formProfileEditValidator = new FormValidator(configValidation, formProfileEdit);\nformProfileEditValidator.enableValidation();\n\nconst formAddCardValidator = new FormValidator(configValidation, formAddCard);\nformAddCardValidator.enableValidation();\n\nconst formUpdateAvatarValidator = new FormValidator(configValidation, formUpdateAvatar);\nformUpdateAvatarValidator.enableValidation();\n// ---------------------------------------------------------------------------\n\n// ------------------- создание экземпляра класса карточки -------------------\nconst createCard = (cardData) => {\n  const card = new Card({\n    // объект с данными карточки\n    data: {\n      name: cardData.name,\n      link: cardData.link,\n      cardID: cardData._id,\n      owner: cardData.owner,\n      likes: cardData.likes\n    },\n    // произойдет при клике на картинку\n    handleCardClick: (name, link) => {\n      popupZoomImage.open(name, link);\n    },\n    // произойдет при клике на лайк\n    handleLikeClick: (cardInfo, likes, user, likeButton, likesCounter) => {\n      let likesOnCard = likes;\n      if(likesOnCard.includes(user._id)) {\n        api.deleteLike(cardInfo.cardID)\n        .then(res => {\n          likeButton.classList.remove('element__like_active');\n          likesOnCard.splice(likesOnCard.indexOf(user._id),1);\n          likesCounter.textContent = res.likes.length;\n        })\n        .catch(error => {\n          console.log(error);\n        })\n      } else {\n        api.setLike(cardInfo.cardID)\n        .then(res => {\n          likeButton.classList.add('element__like_active');\n          likesOnCard.push(user._id);\n          likesCounter.textContent = res.likes.length;\n        })\n        .catch(error => {\n          console.log(error);\n        })\n      }\n    },\n    // произойдет при клике на удаление\n    handleDeleteIconClick: (cardID) => {\n      popupCardDeleteConfirm.open();\n      popupCardDeleteConfirm.createHandleSubmit(() => {\n        api.deleteCard(cardID)\n        .then(res => {\n          console.log(res);\n          card.removeCardLayout();\n          popupCardDeleteConfirm.close();\n        })\n        .catch(error => {\n          console.log(error);\n        })\n      });\n    }\n    },\n    '#card-template',\n    configGenerationCards,\n    userInfo.getUser()\n  );\n  const cardElement = card.generateCard();\n  return cardElement;\n};\n// ---------------------------------------------------------------------------\n\n// ------------- создание экземпляра класса информации профиля ---------------\nconst userInfo = new UserInfo({\n  profileName: '.profile__name',\n  profileStatus: '.profile__status',\n  profileAvatar: '.profile__avatar'\n});\n// ---------------------------------------------------------------------------\n\n// ------------------------ создание экземпляра секции -----------------------\nconst cardList = new Section({\n  renderer: (cardData) => {\n    cardList.addItem(createCard(cardData));\n  }\n}, elements);\n// ---------------------------------------------------------------------------\n\n// создаем класс для связи с сервером\nconst api = new Api({\n  // базовый адрес обращения\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\n  headers: {\n    // уникальный токен пользователя\n    authorization: 'a3ab0050-d01a-4f5a-9bb4-4a039b0aa641',\n    // MIME Type - формат отправляемых данных (формат JSON)\n    'Content-Type': 'application/json'\n  }\n});\n\n// получаем данные о пользователе\napi.getUserInfo()\n  .then(user => {\n    userInfo.setUserInfo(user);\n  })\n  .catch(error => {\n    console.log(error);\n  })\n\n// вызываем метод для взятия данных карточек с сервера и отрисовки их на странице\napi.getInitialCards()\n  .then(card => {\n    cardList.renderItems(card.reverse());\n  })\n  .catch(error => {\n    console.log(error);\n  })\n\n// ----------- создание экземпляра попапа для добавления карточки ------------\nconst popupCardAdd = new PopupWithForm('.popup_section_card-add', (inputsValue) => {\n  buttonSubmitAdd.textContent = 'Добавление...';\n  const user = {};\n  [user.name, user.link] = inputsValue;\n// вызываем метод для создания карточки на сервере и отрисовки ее на странице\napi.createUserInfo(user.name, user.link)\n  .then(card => {\n    const array = [];\n    array.push(card);\n    cardList.renderItems(array);\n    popupCardAdd.close();\n    buttonSubmitAdd.textContent = 'Добавить';\n  })\n  .catch(error => {\n    console.log(error);\n  });\n});\n// ---------------------------------------------------------------------------\n\n// ---------- создание экземпляра попапа для редактирования профиля ----------\nconst popupProfileEdit = new PopupWithForm('.popup_section_profile-edit', (inputsValue) => {\n  buttonSubmitEdit.textContent = 'Сохранение...';\n  const [name, status] = inputsValue;\n  api.setUserInfo(name, status)\n    .then(res => {\n      userInfo.setUserInfo(res);\n      popupProfileEdit.close();\n      buttonSubmitEdit.textContent = 'Сохранить';\n    })\n    .catch(error => {\n      console.log(error);\n    });\n});\n// ---------------------------------------------------------------------------\n\n// ------------ создание экземпляра попапа для обновления аватара ------------\nconst popupAvatarUpdate = new PopupWithForm('.popup_section_update-avatar', (inputValue) => {\n  buttonSubmitUpdate.textContent = 'Сохранение...';\n  const [avatarUrl] = inputValue;\n  api.updateAvatar(avatarUrl)\n    .then(res => {\n      userInfo.setUserInfo(res);\n      popupAvatarUpdate.close();\n      buttonSubmitUpdate.textContent = 'Сохранить';\n    })\n    .catch(error => {\n      console.log(error);\n    });\n});\n// ---------------------------------------------------------------------------\n\n// ------------ создание экземпляра попапа для открытия карточки -------------\nconst popupZoomImage = new PopupWithImage('.popup_section_image-zoom', popupImage, popupTitleZoomImage);\n// ---------------------------------------------------------------------------\n\n// --------- создание экземпляра попапа для подтверждения удаления ---------\nconst popupCardDeleteConfirm = new PopupWithSubmit('.popup_section_delete-confirm');\n// ---------------------------------------------------------------------------\n\n// Слушатели\n\n// навесили слушатели на попапы\npopupZoomImage.setEventListeners();\npopupAvatarUpdate.setEventListeners();\npopupCardAdd.setEventListeners();\npopupProfileEdit.setEventListeners();\npopupCardDeleteConfirm.setEventListeners();\n\n// слушатель нажатия на кнопку добавления карточки\nprofileButtonAdd.addEventListener('click', () => {\n  // сбросили ошибки и заблокировали кнопку\n  formAddCardValidator.resetFormErrors();\n  popupCardAdd.open();\n});\n\n// слушатель нажатия на иконку аватара\navatarIcon.addEventListener('click', () => {\n  // сбросили ошибки и заблокировали кнопку\n  formUpdateAvatarValidator.resetFormErrors();\n  popupAvatarUpdate.open();\n});\n\n// слушатель нажатия на кнопку редактирования профиля\nprofileButtonEdit.addEventListener('click', () => {\n  // сбросили ошибки и заблокировали кнопку\n  formProfileEditValidator.resetFormErrors();\n  popupProfileEdit.open();\n  const [inputName, inputStatus] = inputArray;\n  const {name, status} = userInfo.getUserInfo();\n  [inputName.value, inputStatus.value] = [name, status];\n});\n\n// слушатели для отмены стандартной отправки форм\nformProfileEdit.addEventListener('submit', function (evt) {\n  evt.preventDefault();\n});\n\nformAddCard.addEventListener('submit', function (evt) {\n  evt.preventDefault();\n});\n"],"sourceRoot":""}